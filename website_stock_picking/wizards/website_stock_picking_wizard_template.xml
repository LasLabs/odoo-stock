<?xml version="1.0" encoding="utf-8"?>

<!--
    Copyright 2016 LasLabs Inc.
    @license AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
-->

<odoo>

	<template id="picking_search" name="Picking Search">
		<t t-call="website.layout">
			<div id="wrap">
				<div class="container">
					<h1>Picking Search</h1>
					<div class="row">
						<form method="GET"
							  data-success-page="/website_stock_picking/"
							  class="container-fluid mt32 mb32 s_website_form"
							  >
							<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
							<div class="form-group col-sm-12 col-md-6">
								<label for="search_query">
									Query / Barcode
								</label>
								<input type="text"
									   class="form-control"
									   name="search_query"
									   id="search_query"
									   t-att-value="wizard and wizard.search_query or ''"
									   onClick="this.setSelectionRange(0, this.value.length)"
									   onLoad="this.focus(); this.setSelectionRange(0, this.value.length)"
									   />
								<div id='o_website_form_result' />
							</div>
							<div class="form-group col-sm-6 col-md-3">
								<label for="picking_type">
									Type
								</label>
								<select class="form-control"
										name="picking_type"
										id="picking_type"
										>
									<option value="">All</option>
									<option value="incoming">Incoming</option>
									<option value="outgoing">Outgoing</option>
									<option value="internal">Internal</option>
								</select>
							</div>
							<div class="form-group col-sm-6 col-md-3">
								<label for="picking_state">
									State
								</label>
								<select class="form-control"
										name="picking_state"
										id="picking_state"
										>
									<option value="">All</option>
									<option value="assigned">Available</option>
									<option value="partially_available">Partially Available</option>
									<option value="confirmed">Waiting Availability</option>
								</select>
							</div>
						</form>
					</div>
					<div class="row" t-if="pickings">
						<t t-foreach="pickings" t-as="picking">
							<a t-att-href="'/website_stock_picking/%d' % picking.id">
								<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2 panel panel-default">
									<div class="panel-heading" t-esc="picking.name" />
									<div class="panel-body">
										<strong t-esc="picking.partner_id.name" /> <br />
										<span t-esc="picking.min_date" /> <br />
										<span t-esc="picking.state" />
									</div>
								</div>
							</a>
						</t>
					</div>
				</div>
			</div>
		</t>
	</template>

	<template id="picking_detail" name="Picking Detail">
		<t t-call="website.layout">
			<div id="wrap">
				<div class="container">
					<h1 t-field="picking.name" />
					<form method="POST"
						  data-success-page="/website_stock_picking/"
						  class="container-fluid mt32 mb32 s_website_form"
						  >
						<table class="table table-striped table-hover table-responsive">
							<thead>
								<tr>
									<th>Product</th>
									<th>From => To</th>
									<th>To Do / Done</th>
								</tr>
							</thead>
							<tbody>
								<t t-foreach="picking.pack_operation_product_ids" t-as="pack_op">
									<tr>
										<td>
											<span t-field="pack_op.product_id" />
										</td>
										<td>
											<span t-field="pack_op.from_loc" />
											=>
											<span t-field="pack_op.to_loc" />
										</td>
										<td>
											<span t-field="pack_op.product_qty" />
											/
											<input type="number"
												   t-att-name="'%s.qty_done' % pack_op.id"
												   t-att-value="pack_op.qty_done"
												   style="width: 80px;"
												   />
										</td>
									</tr>
								</t>
							</tbody>
						</table>
						<div class="form-group">
							<div class="col-sm-2">
								<button type="reset" class="btn btn-default">
									Reset
								</button>
							</div>
							<div class="col-sm-2">
								<button type="submit" class="btn btn-primary o_website_form_send">
									Save
								</button>
							</div>
						</div>
						<div id='o_website_form_result' />
					</form>
				</div>
			</div>
		</t>
	</template>

</odoo>
